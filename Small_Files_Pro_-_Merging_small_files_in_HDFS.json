{"paragraphs":[{"title":"Listagem dos arquivos do relatório fsck","text":"%sh\nhdfs dfs -ls /tmp/final_fsck_extract","user":"admin","dateUpdated":"2022-12-29T19:25:34+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 3 items\n-rw-r--r--   1 centos supergroup      30261 2022-12-28 17:10 /tmp/final_fsck_extract/fsck_allBlockFiles_2022-12-28.csv\n-rw-r--r--   1 centos supergroup      30383 2022-12-29 00:10 /tmp/final_fsck_extract/fsck_allBlockFiles_2022-12-29.csv\n-rw-r--r--   1 centos supergroup     123112 2022-12-28 16:32 /tmp/final_fsck_extract/merged_fsckfiles_2022-12-28.csv\n"}]},"apps":[],"jobName":"paragraph_1672341934008_2120097634","id":"20221223-160833_2093942855","dateCreated":"2022-12-29T19:25:34+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1227"},{"title":"Verificação dos tamanhos dos arquivos e se for menor que 128MB, será movido para diretório stage","text":"%sh\nhdfs dfs -rm -r -f -skipTrash /tmp/stage\nhdfs dfs -mkdir /tmp/stage\nhdfs dfs -ls /tmp/final_fsck_extract | awk '{print $5\" \"$8}' | uniq | while read SIZE FILE\n  do\n    if (( \"$SIZE\" <= 134217728 )) 2>/dev/null\n      then\n        hdfs dfs -mv $FILE /tmp/stage/\n    fi\ndone\nhdfs dfs -ls /tmp/stage","user":"admin","dateUpdated":"2022-12-29T19:25:34+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Deleted /tmp/stage\nFound 3 items\n-rw-r--r--   1 centos supergroup      30261 2022-12-28 17:10 /tmp/stage/fsck_allBlockFiles_2022-12-28.csv\n-rw-r--r--   1 centos supergroup      30383 2022-12-29 00:10 /tmp/stage/fsck_allBlockFiles_2022-12-29.csv\n-rw-r--r--   1 centos supergroup     123112 2022-12-28 16:32 /tmp/stage/merged_fsckfiles_2022-12-28.csv\n"}]},"apps":[],"jobName":"paragraph_1672341934009_326367117","id":"20221223-161037_557985129","dateCreated":"2022-12-29T19:25:34+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1228"},{"title":"Map Reduce para mesclar os arquivos do diretório stage para um arquivo no diretório /tmp/output","text":"%sh\nHADOOP_HOME=/opt/cloudera/parcels/CDH/jars\nhdfs dfs -rm -f -r -skipTrash /tmp/output\nhadoop jar $HADOOP_HOME/hadoop-streaming-3.1.1.7.1.8.0-801.jar \\\n                   -Dmapred.reduce.tasks=1 \\\n                   -input \"/tmp/stage\" \\\n                   -output \"/tmp/output\" \\\n                   -mapper cat \\\n                   -reducer cat","user":"admin","dateUpdated":"2022-12-29T19:25:34+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"INCOMPLETE","msg":[{"type":"TEXT","data":"WARNING: Use \"yarn jar\" to launch YARN applications.\npackageJobJar: [] [/opt/cloudera/parcels/CDH-7.1.8-1.cdh7.1.8.p0.30990532/jars/hadoop-streaming-3.1.1.7.1.8.0-801.jar] /tmp/streamjob14270402164421502654.jar tmpDir=null\n22/12/29 13:13:07 INFO client.RMProxy: Connecting to ResourceManager at cdp.18.224.174.227.nip.io/10.0.1.47:8032\n22/12/29 13:13:08 INFO client.RMProxy: Connecting to ResourceManager at cdp.18.224.174.227.nip.io/10.0.1.47:8032\n22/12/29 13:13:08 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /user/centos/.staging/job_1672319303350_0003\n22/12/29 13:13:08 INFO mapred.FileInputFormat: Total input files to process : 3\n22/12/29 13:13:08 INFO mapreduce.JobSubmitter: number of splits:4\n22/12/29 13:13:08 INFO Configuration.deprecation: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces\n22/12/29 13:13:09 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1672319303350_0003\n22/12/29 13:13:09 INFO mapreduce.JobSubmitter: Executing with tokens: []\n22/12/29 13:13:09 INFO conf.Configuration: resource-types.xml not found\n22/12/29 13:13:09 INFO resource.ResourceUtils: Unable to find 'resource-types.xml'.\n22/12/29 13:13:09 INFO impl.YarnClientImpl: Submitted application application_1672319303350_0003\n22/12/29 13:13:09 INFO mapreduce.Job: The url to track the job: http://cdp.18.224.174.227.nip.io:8088/proxy/application_1672319303350_0003/\n22/12/29 13:13:09 INFO mapreduce.Job: Running job: job_1672319303350_0003\n22/12/29 13:13:56 INFO mapreduce.Job: Job job_1672319303350_0003 running in uber mode : false\n22/12/29 13:13:56 INFO mapreduce.Job:  map 0% reduce 0%\n"},{"type":"TEXT","data":"Paragraph received a SIGTERM\nExitValue: 143"}]},"apps":[],"jobName":"paragraph_1672341934009_-2119655254","id":"20221223-162018_1184947714","dateCreated":"2022-12-29T19:25:34+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1229"},{"title":"Validação quantitativa dos arquivos","text":"%sh\nhdfs dfs -ls /tmp/stage\necho\nhdfs dfs -ls /tmp/output","user":"admin","dateUpdated":"2022-12-29T19:28:44+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 3 items\n-rw-r--r--   1 centos supergroup      30261 2022-12-28 17:10 /tmp/stage/fsck_allBlockFiles_2022-12-28.csv\n-rw-r--r--   1 centos supergroup      30383 2022-12-29 00:10 /tmp/stage/fsck_allBlockFiles_2022-12-29.csv\n-rw-r--r--   1 centos supergroup     123112 2022-12-28 16:32 /tmp/stage/merged_fsckfiles_2022-12-28.csv\n\nFound 1 items\n-rw-r--r--   1 centos supergroup          0 2022-12-29 13:14 /tmp/output/_SUCCESS\n"}]},"apps":[],"jobName":"paragraph_1672341934009_1564832897","id":"20221223-162141_1382833496","dateCreated":"2022-12-29T19:25:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:1230","dateFinished":"2022-12-29T19:27:38+0000","dateStarted":"2022-12-29T19:27:33+0000"},{"title":"Movimentação do arquivo mesclado","text":"%sh\nexport DAY=$(date +\"%Y-%m-%d\")\nexport TIME=$(date +\"%H%M%S\")\nhdfs dfs -mv /tmp/output/part-00000 /tmp/final_fsck_extract/merged_fsckfiles_\"$DAY\"_$TIME.csv\nhdfs dfs -ls -h /tmp/final_fsck_extract","user":"admin","dateUpdated":"2022-12-29T19:27:24+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 2 items\n-rw-r--r--   1 centos supergroup     32.6 K 2022-12-29 13:10 /tmp/final_fsck_extract/fsck_allBlockFiles_2022-12-29.csv\n-rw-r--r--   1 centos supergroup    180.0 K 2022-12-29 13:14 /tmp/final_fsck_extract/merged_fsckfiles_.csv\n"}]},"apps":[],"jobName":"paragraph_1672341934010_-1298161852","id":"20221229-131213_1458678913","dateCreated":"2022-12-29T19:25:34+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:1231"}],"name":"/Small Files/Pro - Merging small files in HDFS","id":"2HR54Q487","noteParams":{},"noteForms":{},"angularObjects":{"sh:admin:":[],"livy:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":true,"looknfeel":"default","personalizedMode":"false"},"info":{}}